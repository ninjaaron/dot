# vim: ft=sh
alias s='sudo -E'
alias rs='rsync -av --progress'
alias cpr='cp --reflink=always -R'
alias rm='rm -r'

# vim aliases
alias zshrc="$EDITOR $HOME/.zshrc; dt"
alias vimrc="$EDITOR $HOME/.vimrc; dt"
alias al="$EDITOR $HOME/.aliases; dt"
alias book="$EDITOR ~/doc/work/heb/book.asciidoc"
alias heb="cd ~/doc/work/heb/git/"
alias hla="$EDITOR ~/.config/herbstluftwm/autostart"
alias hlf="$EDITOR ~/.config/herbstluftwm/func"
alias hls="$EDITOR ~/.config/herbstluftwm/swap"

alias dot="cd $DOT"
# packagmanagment 
alias pS="sudo pacmatic -S"
alias aS="pacaur -aS"
alias pSs="pacaur -Ss"
alias pRs="sudo pacman -Rs"
alias pU="sudo pacman -U"
alias aSyu="pacaur -Syua"
alias pQ="pacman -Q"
alias pSyu="sudo ~/bin/rsnap; sudo pacmatic -Su && echo 0> ~/.updates"

alias sc="sudo systemctl"

alias agi='sudo apt-get install'
alias agp='sudo apt-get purge'
alias agu='sudo apt-get update'
alias agdu='sudo apt-get dist-upgrade'
alias agac='sudo apt-get autoclean'
alias agar='sudo apt-get autoremove'
alias aar='sudo add-apt-repository'

alias acs='apt-cache search'
alias acsh='apt-cache show'

alias grub-update="sudo grub-mkconfig -o /boot/grub/grub.cfg"

# power
alias reboot="systemctl reboot"
alias halt="systemctl poweroff"
alias sus="systemctl suspend"

# misc command shortcuts
alias ls="ls --color=auto -F"
alias ll="ls --color=auto -lh"
alias la="ls --color=auto -A"
alias lla="ls --color=auto -lhA"
lr() {
  for i in *; do
    if [[ -d $i ]]; then
      printf "\e[1;35m= $i\n\e[m"
      ls --color=auto -FH $i
    else
      printf "\e[1;33m- $i\n\e[m"
    fi
  done
}

alias df="df -h"
alias du="du -h"
alias x='chmod +x'
alias grep='grep --color=auto'
alias f='find -name'
alias ast="~/bin/autosus toggle"

mnt() { sudo mount -o uid=ninjaaron "$@" $HOME/mnt ;}

alias tma='tmux attach -d'  #opens a window with the last tmux session
alias tm='tmux new-session'
alias w3g='w3m -cookie google.com'
alias w3d='w3m duckduckgo.com'
alias png="ping google.com"
alias trans="ssh -fNT -L 9091:localhost:9091 sink"
alias td="transmission-daemon"
ta() {
    torrent="$1"
    transmission-remote -a "$torrent"
}
alias tl="transmission-remote -l"
alias tcl='transmission-cli'
alias tdl="$HOME/bin/torrent-dl -s sink"
trr() {
  for i in $@; do
    transmission-remote -t $i --remove-and-delete;
  done
}
tf(){ transmission-remote -t $@ -f;}
alias hc="herbstclient"
alias di="diatheke"
alias dk="diatheke -b NET -k"
alias dh="diatheke -b OSMHB -k"
alias mpp="mpv -playlist"
alias nh="sudo nethogs eth1"
alias ymus="youtube-dl -x --audio-format mp3"

np() {
  echo "#!/usr/bin/env python3" > "$1"
  chmod +x "$1"
  e "$1"
}

ali() {
  echo "alias $1='$2'" >> ~/.aliases
  source ~/.aliases
}

ern() {
  for file in "$@"; do
    local temp="/tmp/$(echo "$file"|md5sum)"
    echo "$file" > "$temp"
    "$EDITOR" "$temp"
    [[ $file != $(cat "$temp") ]] && mv "$file" "$(cat "$temp")"
    rm "$temp"
  done
}

m() {
  pattern="${@#/}"
  pattern="${pattern%/*}"
  flags="${@#/$pattern/}"
  if [[ -n $flags ]]; then
    grep -"$flags" "$pattern"
  else
    grep "$pattern"
  fi
}

alias pbxc='xclip -o|pb'

gap() { herbstclient emit_hook "gap $@";}

# find processes that match a regex
psg() { ps aux|grep "$@"|grep -v grep; }

# "c" function makes a log of visited directories and helps you get there quick
# It got a little long, so I put it in its own script, which I source here:
#source ~/bin/dirlog.sh
#source ~/bin/ypm.sh
c() {
  dir=$(dirlog-cd "$@")
  if [ "$dir" != "" ]; then
    cd "$dir"&& ls
  fi
}

alias e="permedit"

emaster() {
  pushd $DOT
  git commit -am 'about to edit master...'
  git checkout master
  popd
  vim "$1"
  pushd $DOT
  git commit -am 'edited master...'
  git checkout termux
  popd
}

# fun with python
function = {
  if [[ $1 == -l ]]; then
    shift
    python << END
import sys, os, re, requests, site, math
import fileinput
for i in fileinput.input():
  i = $*
  print(i)
END
  else
    python << END
from math import *
from collections import Iterable
import sys, os, re, site
try:
  from collist import collist
except ImportError:
  collist = lambda x: x
x = $*
if not isinstance(x, str) and isinstance(x, Iterable):
  print(collist(x))
else:
  print(x)
END
  fi
}

alias act="source ~/bin/activate-venv"

# resets the size of the framebuffer for the tty
fbg() {
  [ -z "$@" ] && fbset -g 1600 900 1600 900 32 || fbset -g "$@" "$@" 32
}

se() {
  ls -d *"$@"*
}

# opens a tmux session with an optional command

# unsorted aliasses
alias voff='xrandr --output VGA1 --off'
alias von='xrandr --output VGA1 --auto --right-of HDMI2'
alias xr720='xrandr;xrandr --output HDMI1 --mode 1280x720'
alias xr1080='xrandr --output HDMI1 --mode 1920x1080'
alias zathura='~/bin/popen zathura'
alias geeqie='popen geeqie'
alias y='yank'
alias d='move'
alias p='put'
vs() {
  what=`which "$1"`

  if (( $(echo "$what"|wc -l ) > 1 )); then
    echo "$what"|$PAGER -c 'set ft=sh'
  else
    $PAGER "$what"
  fi
}
alias pyint='pip wheel .; pip install --user --upgrade *py3*whl'
alias pyclean='rm dist; rm *egg-info; rm __pycache__; rm *.pyc; rm *whl'

ghclone() {
  git clone "https://github.com/$1"
}

gitme() {
  ghclone ninjaaron/"$1"
}
alias view='vimpager'
