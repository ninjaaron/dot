#!/usr/bin/env python3
import os
import pathlib
import subprocess as sp
import sys


def main():
    editor = os.environ.get('EDITOR') or 'nano'
    test = path = pathlib.Path(sys.argv[-1])
    args = [editor, *sys.argv[1:]]
    while not test.exists():
        test = test.parent
    if not os.access(test, os.W_OK):
        resp = input('sudo [Y/n]? ')
        if not resp or resp.lower().startswith('y'):
            args.insert(0, 'sudo')
    sp.call(args)
    


if __name__ == '__main__':
    main()
