#!/usr/bin/env bash

language=$1
name=$2
code="$(cat $name)"

{
cat << EOF
:source-highlighter: pygments
:pygments-style: paraiso-light

[source,$language,linenums]
.$name
----
$code
----
EOF
} | asciidoctor -o "$name.html" -

rsync "$name.html" sink:/var/www/code/
echo "http://phosmin.org/code/$name.html"
rm $name.html
