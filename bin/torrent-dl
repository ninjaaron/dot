#!/usr/bin/env python3

import sys
import subprocess as sp

server = sys.argv[1]
tornums = set(sys.argv[2:])

command = 'ssh ' + server + ' transmission-remote -l'
torrents = sp.check_output(command.split()).decode().splitlines()
torrents = [t.split() for t in torrents]
files = ['"'+' '.join(t[9:])+'"' for t in torrents if t[0] in tornums]

for f in files:
    sp.run(['sftp', '-r', server+':dls/"'+f+'"', '.'])
